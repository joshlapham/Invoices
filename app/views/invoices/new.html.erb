<% @page_title = "Add New Invoice" %>

<%= link_to("<< Back", {:controller => 'users', :action => 'index'}, :class => 'back-link btn btn-default') %>

<br />

<section id="add-new-invoice">

	<h3>Add New Invoice</h3>

	<%= form_for(setup_invoice(@invoice), :url => {:controller => 'invoices', :action => 'create'}) do |t| %>
		
		<table class="table table-bordered table-condensed table-striped">
			<tr>
				<th>Invoice #</th>
				<td><%= t.text_field(:invoice_number) %></td>
			</tr>
			<tr>
				<th>Client</th>
				<td><%= t.collection_select(:client_id, current_user.clients, :id, :name) %></td>
			</tr>
			<tr>
				<th>Invoice Date</th>
				<td><%= t.text_field(:date_sent) %></td>
			</tr>
			<tr>
				<th>Due Date</th>
				<td><%= t.text_field(:date_due) %></td>
			</tr>
			<tr>
				<th>Amount</th>
				<td><%= t.text_field(:amount) %></td>
			</tr>
			<tr>
				<th>Status</th>
				<td><%= t.select :status, [['Draft', 'draft'], ['Sent', 'sent'], ['Paid', 'paid']] %></td>
			</tr>
		</table>

		<h3>Items</h3>

		<table class="table table-bordered table-condensed table-striped">
			<tr>
				<th>Description</th>
				<th>Quantity</th>
				<th>Unit Cost</th>
				<th>Discount</th>
			</tr>
			<%= t.fields_for :items do |item| %>
				<tr>
					<td><%= item.text_field :description %></td>
					<td><%= item.text_field :quantity %></td>
					<td><%= item.text_field :unit_cost %></td>
					<td><%= item.text_field :discount %></td>
				</tr>
				<%= item.hidden_field :invoice_id %>
			<% end %>
		</table>

		<%= submit_tag("Create Invoice", :class => "btn btn-success") %>

	<% end %>

</section>

<br />
