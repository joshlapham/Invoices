<section>
	<%= link_to("<< Back", {:controller => 'users', :action => 'index'}, :class => 'back-link btn btn-default') %>
	<%= link_to("Edit Invoice", {:controller => 'invoices', :action => 'edit', :id => @invoice.id}, :class => 'btn btn-default') %>
	<%= link_to("PDF", {:controller => 'invoices', :action => 'show', :id => @invoice.id, :format => :pdf}, :class => 'btn btn-default') %>
</section>

<section id="invoice-detail">

	<h3>Details</h3>

	<table class="table table-bordered table-condensed table-striped">
		<tr>
			<th>Invoice #</th>
			<td><%= @invoice.invoice_number %></td>
		</tr>
		<tr>
			<th>Client</th>
			<% client_this_belongs_to = Client.find_by(id: @invoice.client_id) %>
			<td><%= link_to(client_this_belongs_to.name, {:controller => "clients", :action => "show", :id => client_this_belongs_to.id}) %></td>
		</tr>
		<tr>
			<th>Invoice Date</th>
			<td><%= @invoice.date_sent %></td>
		</tr>
		<tr>
			<th>Due Date</th>
			<td><%= @invoice.date_due %></td>
		</tr>
		<tr>
			<th>Amount</th>
			<td><%= @invoice.amount %></td>
		</tr>
		<tr>
			<th>Status</th>
			<% if @invoice.status == "draft" %>
				<td class="invoice-status-draft">
			<% elsif @invoice.status == "sent" %>
				<td class="invoice-status-sent">
			<% elsif @invoice.status == "paid" %>
				<td class="invoice-status-paid">
			<% end %>
				<b><%= @invoice.status.capitalize %></b>
			</td>
		</tr>
		
	</table>

	<h3>Items</h3>

		<% if @items.empty? %>
			No items for this invoice.
		<% else %>
			<table class="table table-bordered table-condensed table-striped">

				<tr>
					<th>Description</th>
					<th>Quantity</th>
					<th>Unit Cost</th>
					<th>Discount</th>
				</tr>
				<% @items.each do |item| %>
					<tr>
						<td><%= item.description %></td>
						<td><%= item.quantity %></td>
						<td><%= item.unit_cost %></td>
						<td><%= item.discount %></td>
					</tr>
				<% end %>

			</table>
		<% end %>
	
</section>
